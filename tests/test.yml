---
- name: Start the Docker containers
  hosts: localhost
  gather_facts: false

  vars_files:
    - docker_containers.yml

  vars:
    - container_state: started
    - container_privileged: true

  roles:
    - docker

  tags:
    - docker-start

- name: Test the zookeeper role for Ubuntu
  hosts: zookeeper-ubuntu
  become: yes
  become_method: sudo

  vars:
    zookeeper_ansible_host_group: zookeeper-ubuntu

  roles:
    - ansible-role-zookeeper
    - zookeeper-test

  tags:
    - zookeeper-ubuntu


- name: Test the zookeeper role for CentOS
  hosts: zookeeper-centos
  become: yes
  become_method: sudo

  vars:
    zookeeper_ansible_host_group: zookeeper-centos

  roles:
    - ansible-role-zookeeper
    - zookeeper-test

  tags:
    - zookeeper-centos


- name: Test the zookeeper role for Clustering
  hosts: zookeeper-cluster
  gather_facts: True
  become: yes
  become_method: sudo

  vars:
    zookeeper_ansible_host_group: zookeeper-cluster
    zookeeper_server_variable: facter_ipaddress

  roles:
    - facter
    - ansible-role-zookeeper
    - zookeeper-test

  tags:
    - zookeeper-cluster


- name: Stop the Docker containers
  hosts: localhost
  gather_facts: false

  vars_files:
    - docker_containers.yml

  vars:
    - container_state: absent

  roles:
    - docker

  tags:
    - docker-stop